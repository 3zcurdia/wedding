<div class="flex flex-row justify-between items-center">
  <div class="py-4">
    <h2 class="text-4xl font-bold">Guests</h2>
    <p class="text-gray-600"><%= @guests_count %> guests with <%= @plus_ones_count%> plus ones</p>
    <p class="text-gray-700 font-bold">Total: <%= @guests_count + @plus_ones_count %> </p>
  </div>

  <div class="flex flex-row gap-2 items-center">
    <%= form_with(url: admin_guests_imports_path, scope: :guests, method: :post, local: true, multipart: true, data: { controller: "autoupload-form" }) do |f| %>
      <%= f.file_field :file, accept: "text/csv", class: "hidden", data: { autoupload_form_target: "input", action: "change->autoupload-form#upload" } %>
      <button type="button" data-autoupload-form-target="button" data-action="click->autoupload-form#select" class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded cursor-pointer">
        <i class="fa-solid fa-file-arrow-up"></i>
        Upload CSV
      </button>
    <% end %>
    <%= link_to "New guest", new_admin_guest_path, class: "bg-blue-600 hover:bg-blue-700 text-white cursor-pointer p-2 rounded" %>
  </div>
</div>

<div class="py-3">
  <% if @guests.empty? %>
    <p class="text-center text-3xl">No guests found</p>
  <% else %>
    <table class="w-full">
      <thead class="">
        <tr>
          <th class="px-4 py-2">Name</th>
          <th class="px-4 py-2">Phone</th>
          <th class="px-4 py-2">Plus Ones</th>
          <th class="px-4 py-2">Actions</th>
        </tr>
      </thead>
      <tbody id="guests">
        <% @guests.each do |guest| %>
          <tr id="<%= dom_id guest %>">
            <td class="px-4 py-2"><%= guest.full_name %></td>
            <td class="px-4 py-2"><%= guest.phone %></td>
            <td class="px-4 py-2"><%= guest.plus_ones_count %></td>
            <td class="px-4 py-2">
              <div class="flex flex-row gap-2 justify-end">
                <%= link_to "Show", admin_guest_path(guest), class: "bg-blue-600 hover:bg-blue-700 text-white cursor-pointer p-2 rounded" %>
                <%= link_to "Edit", edit_admin_guest_path(guest), class: "bg-blue-600 hover:bg-blue-700 text-white cursor-pointer p-2 rounded" %>
                <%= button_to "Delete", admin_guest_path(guest), method: :delete, class: "bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" %>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <div class="flex flex-row gap-2 py-5 justify-end">
      <%== pagy_info(@pagy) %>
      <%== pagy_nav(@pagy) %>
    </div>
  <% end %>
</div>
